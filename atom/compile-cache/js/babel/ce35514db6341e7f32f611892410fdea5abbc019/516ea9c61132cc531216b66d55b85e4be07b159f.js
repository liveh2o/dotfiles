function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }

var _jasmineFix = require('jasmine-fix');

var _libRegistry = require('../lib/registry');

var _libRegistry2 = _interopRequireDefault(_libRegistry);

describe('Registry', function () {
  var registry = undefined;

  beforeEach(function () {
    registry = new _libRegistry2['default']();
  });
  afterEach(function () {
    registry.dispose();
  });
  function validateOldTiles(oldTitles, titles) {
    expect(oldTitles.length).toBe(titles.length);

    titles.forEach(function (title, index) {
      expect(oldTitles[index].title).toBe(title);
      expect(oldTitles[index].duration === '1ms' || oldTitles[index].duration === '0ms').toBe(true);
    });
  }

  describe('handling of providers', function () {
    (0, _jasmineFix.it)('registers providers properly and clears them out when they die', function () {
      var provider = registry.create();
      expect(registry.providers.has(provider)).toBe(true);
      provider.dispose();
      expect(registry.providers.has(provider)).toBe(false);
    });
    (0, _jasmineFix.it)('emits update event properly', function () {
      var provider = registry.create();
      var update = jasmine.createSpy('update');
      registry.onDidUpdate(update);
      expect(update).not.toHaveBeenCalled();
      provider.add('Hey');
      provider.remove('Hey');
      provider.clear();
      expect(update).toHaveBeenCalled();
      expect(update.calls.length).toBe(2);
    });
    (0, _jasmineFix.it)('adds and returns sorted titles', _asyncToGenerator(function* () {
      var provider = registry.create();
      provider.add('Hey');
      yield (0, _jasmineFix.wait)(1);
      provider.add('Wow');
      yield (0, _jasmineFix.wait)(1);
      provider.add('Hello');
      expect(registry.getTilesActive()).toEqual(['Hey', 'Wow', 'Hello']);
    }));
    (0, _jasmineFix.it)('adds removed ones to history', _asyncToGenerator(function* () {
      var provider = registry.create();
      provider.add('Boy');
      yield (0, _jasmineFix.wait)(1);
      provider.add('Hey');
      expect(registry.getTilesActive()).toEqual(['Boy', 'Hey']);
      expect(registry.getTilesOld()).toEqual([]);

      provider.remove('Hey');
      expect(registry.getTilesActive()).toEqual(['Boy']);
      validateOldTiles(registry.getTilesOld(), ['Hey']);
    }));
    (0, _jasmineFix.it)('adds cleared ones to history', function () {
      var provider = registry.create();
      provider.add('Hello');
      provider.add('World');

      expect(registry.getTilesActive()).toEqual(['Hello', 'World']);
      expect(registry.getTilesOld()).toEqual([]);

      provider.clear();
      expect(registry.getTilesActive()).toEqual([]);
      validateOldTiles(registry.getTilesOld(), ['Hello', 'World']);
    });
  });
  describe('getTilesOld', function () {
    (0, _jasmineFix.it)('excludes active ones from history', function () {
      var provider = registry.create();
      provider.add('Yo CJ');
      provider.add('Murica');
      provider.remove('Yo CJ');
      provider.remove('Murica');
      provider.add('Yo CJ');

      validateOldTiles(registry.getTilesOld(), ['Murica']);
    });
    (0, _jasmineFix.it)('excludes duplicates and only returns the last one', function () {
      var provider = registry.create();

      provider.add('Some');
      provider.add('Things');
      provider.remove('Some');
      provider.remove('Things');
      provider.add('Some');
      provider.remove('Some');

      validateOldTiles(registry.getTilesOld(), ['Things', 'Some']);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9haC8uYXRvbS9wYWNrYWdlcy9idXN5LXNpZ25hbC9zcGVjL3JlZ2lzdHJ5LXNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OzswQkFFeUIsYUFBYTs7MkJBQ2pCLGlCQUFpQjs7OztBQUV0QyxRQUFRLENBQUMsVUFBVSxFQUFFLFlBQVc7QUFDOUIsTUFBSSxRQUFRLFlBQUEsQ0FBQTs7QUFFWixZQUFVLENBQUMsWUFBVztBQUNwQixZQUFRLEdBQUcsOEJBQWMsQ0FBQTtHQUMxQixDQUFDLENBQUE7QUFDRixXQUFTLENBQUMsWUFBVztBQUNuQixZQUFRLENBQUMsT0FBTyxFQUFFLENBQUE7R0FDbkIsQ0FBQyxDQUFBO0FBQ0YsV0FBUyxnQkFBZ0IsQ0FBQyxTQUFxRCxFQUFFLE1BQXFCLEVBQUU7QUFDdEcsVUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFBOztBQUU1QyxVQUFNLENBQUMsT0FBTyxDQUFDLFVBQVMsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNwQyxZQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtBQUMxQyxZQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLFFBQVEsS0FBSyxLQUFLLElBQUksU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLFFBQVEsS0FBSyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7S0FDOUYsQ0FBQyxDQUFBO0dBQ0g7O0FBRUQsVUFBUSxDQUFDLHVCQUF1QixFQUFFLFlBQVc7QUFDM0Msd0JBQUcsZ0VBQWdFLEVBQUUsWUFBVztBQUM5RSxVQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUE7QUFDbEMsWUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFFBQVEs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Q0FBQyxNQUFNLENBQUMsQ0FBQTtBQUN2QixjQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0FBQ3pCLGNBQVEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUE7QUFDcEIsY0FBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQTs7QUFFdkIsc0JBQWdCLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUE7S0FDN0QsQ0FBQyxDQUFBO0dBQ0gsQ0FBQyxDQUFBO0NBQ0gsQ0FBQyxDQUFBIiwiZmlsZSI6Ii9Vc2Vycy9haC8uYXRvbS9wYWNrYWdlcy9idXN5LXNpZ25hbC9zcGVjL3JlZ2lzdHJ5LXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG5pbXBvcnQgeyBpdCwgd2FpdCB9IGZyb20gJ2phc21pbmUtZml4J1xuaW1wb3J0IFJlZ2lzdHJ5IGZyb20gJy4uL2xpYi9yZWdpc3RyeSdcblxuZGVzY3JpYmUoJ1JlZ2lzdHJ5JywgZnVuY3Rpb24oKSB7XG4gIGxldCByZWdpc3RyeVxuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XG4gICAgcmVnaXN0cnkgPSBuZXcgUmVnaXN0cnkoKVxuICB9KVxuICBhZnRlckVhY2goZnVuY3Rpb24oKSB7XG4gICAgcmVnaXN0cnkuZGlzcG9zZSgpXG4gIH0pXG4gIGZ1bmN0aW9uIHZhbGlkYXRlT2xkVGlsZXMob2xkVGl0bGVzOiBBcnJheTx7IHRpdGxlOiBzdHJpbmcsIGR1cmF0aW9uOiBzdHJpbmcgfT4sIHRpdGxlczogQXJyYXk8c3RyaW5nPikge1xuICAgIGV4cGVjdChvbGRUaXRsZXMubGVuZ3RoKS50b0JlKHRpdGxlcy5sZW5ndGgpXG5cbiAgICB0aXRsZXMuZm9yRWFjaChmdW5jdGlvbih0aXRsZSwgaW5kZXgpIHtcbiAgICAgIGV4cGVjdChvbGRUaXRsZXNbaW5kZXhdLnRpdGxlKS50b0JlKHRpdGxlKVxuICAgICAgZXhwZWN0KG9sZFRpdGxlc1tpbmRleF0uZHVyYXRpb24gPT09ICcxbXMnIHx8IG9sZFRpdGxlc1tpbmRleF0uZHVyYXRpb24gPT09ICcwbXMnKS50b0JlKHRydWUpXG4gICAgfSlcbiAgfVxuXG4gIGRlc2NyaWJlKCdoYW5kbGluZyBvZiBwcm92aWRlcnMnLCBmdW5jdGlvbigpIHtcbiAgICBpdCgncmVnaXN0ZXJzIHByb3ZpZGVycyBwcm9wZXJseSBhbmQgY2xlYXJzIHRoZW0gb3V0IHdoZW4gdGhleSBkaWUnLCBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gcmVnaXN0cnkuY3JlYXRlKClcbiAgICAgIGV4cGVjdChyZWdpc3RyeS5wcm92aWRlcnMuaGFzKHByb3ZpZGVyKSkudG9CZSh0cnVlKVxuICAgICAgcHJvdmlkZXIuZGlzcG9zZSgpXG4gICAgICBleHBlY3QocmVnaXN0cnkucHJvdmlkZXJzLmhhcyhwcm92aWRlcikpLnRvQmUoZmFsc2UpXG4gICAgfSlcbiAgICBpdCgnZW1pdHMgdXBkYXRlIGV2ZW50IHByb3Blcmx5JywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBwcm92aWRlciA9IHJlZ2lzdHJ5LmNyZWF0ZSgpXG4gICAgICBjb25zdCB1cGRhdGUgPSBqYXNtaW5lLmNyZWF0ZVNweSgndXBkYXRlJylcbiAgICAgIHJlZ2lzdHJ5Lm9uRGlkVXBkYXRlKHVwZGF0ZSlcbiAgICAgIGV4cGVjdCh1cGRhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICAgIHByb3ZpZGVyLmFkZCgnSGV5JylcbiAgICAgIHByb3ZpZGVyLnJlbW92ZSgnSGV5JylcbiAgICAgIHByb3ZpZGVyLmNsZWFyKClcbiAgICAgIGV4cGVjdCh1cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgZXhwZWN0KHVwZGF0ZS5jYWxscy5sZW5ndGgpLnRvQmUoMilcbiAgICB9KVxuICAgIGl0KCdhZGRzIGFuZCByZXR1cm5zIHNvcnRlZCB0aXRsZXMnLCBhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gcmVnaXN0cnkuY3JlYXRlKClcbiAgICAgIHByb3ZpZGVyLmFkZCgnSGV5JylcbiAgICAgIGF3YWl0IHdhaXQoMSlcbiAgICAgIHByb3ZpZGVyLmFkZCgnV293JylcbiAgICAgIGF3YWl0IHdhaXQoMSlcbiAgICAgIHByb3ZpZGVyLmFkZCgnSGVsbG8nKVxuICAgICAgZXhwZWN0KHJlZ2lzdHJ5LmdldFRpbGVzQWN0aXZlKCkpLnRvRXF1YWwoWydIZXknLCAnV293JywgJ0hlbGxvJ10pXG4gICAgfSlcbiAgICBpdCgnYWRkcyByZW1vdmVkIG9uZXMgdG8gaGlzdG9yeScsIGFzeW5jIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgcHJvdmlkZXIgPSByZWdpc3RyeS5jcmVhdGUoKVxuICAgICAgcHJvdmlkZXIuYWRkKCdCb3knKVxuICAgICAgYXdhaXQgd2FpdCgxKVxuICAgICAgcHJvdmlkZXIuYWRkKCdIZXknKVxuICAgICAgZXhwZWN0KHJlZ2lzdHJ5LmdldFRpbGVzQWN0aXZlKCkpLnRvRXF1YWwoWydCb3knLCAnSGV5J10pXG4gICAgICBleHBlY3QocmVnaXN0cnkuZ2V0VGlsZXNPbGQoKSkudG9FcXVhbChbXSlcblxuICAgICAgcHJvdmlkZXIucmVtb3ZlKCdIZXknKVxuICAgICAgZXhwZWN0KHJlZ2lzdHJ5LmdldFRpbGVzQWN0aXZlKCkpLnRvRXF1YWwoWydCb3knXSlcbiAgICAgIHZhbGlkYXRlT2xkVGlsZXMocmVnaXN0cnkuZ2V0VGlsZXNPbGQoKSwgWydIZXknXSlcbiAgICB9KVxuICAgIGl0KCdhZGRzIGNsZWFyZWQgb25lcyB0byBoaXN0b3J5JywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBwcm92aWRlciA9IHJlZ2lzdHJ5LmNyZWF0ZSgpXG4gICAgICBwcm92aWRlci5hZGQoJ0hlbGxvJylcbiAgICAgIHByb3ZpZGVyLmFkZCgnV29ybGQnKVxuXG4gICAgICBleHBlY3QocmVnaXN0cnkuZ2V0VGlsZXNBY3RpdmUoKSkudG9FcXVhbChbJ0hlbGxvJywgJ1dvcmxkJ10pXG4gICAgICBleHBlY3QocmVnaXN0cnkuZ2V0VGlsZXNPbGQoKSkudG9FcXVhbChbXSlcblxuICAgICAgcHJvdmlkZXIuY2xlYXIoKVxuICAgICAgZXhwZWN0KHJlZ2lzdHJ5LmdldFRpbGVzQWN0aXZlKCkpLnRvRXF1YWwoW10pXG4gICAgICB2YWxpZGF0ZU9sZFRpbGVzKHJlZ2lzdHJ5LmdldFRpbGVzT2xkKCksIFsnSGVsbG8nLCAnV29ybGQnXSlcbiAgICB9KVxuICB9KVxuICBkZXNjcmliZSgnZ2V0VGlsZXNPbGQnLCBmdW5jdGlvbigpIHtcbiAgICBpdCgnZXhjbHVkZXMgYWN0aXZlIG9uZXMgZnJvbSBoaXN0b3J5JywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBwcm92aWRlciA9IHJlZ2lzdHJ5LmNyZWF0ZSgpXG4gICAgICBwcm92aWRlci5hZGQoJ1lvIENKJylcbiAgICAgIHByb3ZpZGVyLmFkZCgnTXVyaWNhJylcbiAgICAgIHByb3ZpZGVyLnJlbW92ZSgnWW8gQ0onKVxuICAgICAgcHJvdmlkZXIucmVtb3ZlKCdNdXJpY2EnKVxuICAgICAgcHJvdmlkZXIuYWRkKCdZbyBDSicpXG5cbiAgICAgIHZhbGlkYXRlT2xkVGlsZXMocmVnaXN0cnkuZ2V0VGlsZXNPbGQoKSwgWydNdXJpY2EnXSlcbiAgICB9KVxuICAgIGl0KCdleGNsdWRlcyBkdXBsaWNhdGVzIGFuZCBvbmx5IHJldHVybnMgdGhlIGxhc3Qgb25lJywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBwcm92aWRlciA9IHJlZ2lzdHJ5LmNyZWF0ZSgpXG5cbiAgICAgIHByb3ZpZGVyLmFkZCgnU29tZScpXG4gICAgICBwcm92aWRlci5hZGQoJ1RoaW5ncycpXG4gICAgICBwcm92aWRlci5yZW1vdmUoJ1NvbWUnKVxuICAgICAgcHJvdmlkZXIucmVtb3ZlKCdUaGluZ3MnKVxuICAgICAgcHJvdmlkZXIuYWRkKCdTb21lJylcbiAgICAgIHByb3ZpZGVyLnJlbW92ZSgnU29tZScpXG5cbiAgICAgIHZhbGlkYXRlT2xkVGlsZXMocmVnaXN0cnkuZ2V0VGlsZXNPbGQoKSwgWydUaGluZ3MnLCAnU29tZSddKVxuICAgIH0pXG4gIH0pXG59KVxuIl19